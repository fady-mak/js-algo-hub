# 背包问题（Knapsack Problem）

## 介绍

背包问题是一类经典的组合优化问题。最常见的形式是 0/1 背包问题，它描述了一个决策问题：给定一组物品，每个物品有一定的重量和价值，在总重量不超过容量的情况下，如何选择物品使得总价值最大？

## 问题定义

1. 输入：

- 物品数$n$
- 容量$W$
- 每个物品的重量$weights[i]$
- 每个物品的价值$values[i]$

2. 输出：

- 在不超过背包容量的情况下，能够获得的最大总价值。

## 解决方法

1. 动态规划

- 状态定义

令 $dp[i][w]$ 表示前$i$个物品在容量为$w$时的最大价值。

- 状态转移方程

- 如果不选第$i$个物品：
  $dp[i][w] = dp[i-1][w] $
- 如果选择第$i$个物品：
  $dp[i][w] = dp[i-1][w-weights[i]] + values[i]$

- 因此：

$dp[i][w] = \max(dp[i-1][w], dp[i-1][w-weights[i]] + values[i])$

- 初始条件

  $dp[0][w] = 0$ ：当没有物品可选时，最大价值为 `0`。

- 优化

  使用一维数组优化空间复杂度，倒序遍历容量$w$。

## 代码

- 二维动态规划: 时间复杂度$O(n \times W)$，空间复杂度$O(n \times W)$

- 一维动态规划: 时间复杂度$O(n \times W)$ ，空间复杂度$O(W)$

::: code-group
<<< ../../../src/dp/knapsack-problem.ts

<<< ../../../src/dp/knapsack-problem.test.ts
:::

## 源码

<SourceGroup/>

## 算法复杂度

1. 二维动态规划

- 时间复杂度： $O(n \times W)$，需要遍历$n$个物品和容量$W$。
- 空间复杂度： $O(n \times W)$，需要存储$dp$二维数组。

2. 一维动态规划

- 时间复杂度： $O(n \times W)$ ，遍历$n$个物品和容量$W$。
- 空间复杂度： $O(W)$，只需要一维数组存储$dp$。

## 应用场景

1. 资源分配问题：在有限资源条件下，分配资源以获得最大效益。
2. 时间管理问题：给定任务和时间约束，如何安排任务以最大化收益。
3. 物流与运输：在有限载重量的情况下，装载货物以获得最大利润。

## 总结

背包问题是组合优化问题中的典型案例，基本动态规划方法具有较高的时间复杂度，但通过空间优化，可以有效解决大规模问题。
它是动态规划入门的核心问题，具有广泛的现实意义和扩展版本，如多维背包问题、完全背包问题等。
