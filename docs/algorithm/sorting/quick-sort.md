# 快速排序

## 介绍

快速排序（Quick Sort）是一种分治算法，通过选择一个“基准值”（`Pivot`），将数组分为小于基准值和大于基准值的两部分，然后递归地对两部分进行排序，最终将数组排好序。

> [!TIP] 快速排序的基本思想如下：
>
> 1. 选择一个“基准值”（`Pivot`），通常是数组的第一个元素、最后一个元素或随机选择的一个元素。
> 2. 遍历数组，将小于基准值的元素放到左边，大于基准值的元素放到右边（称为分区操作）。
> 3. 对左、右两个子数组递归执行快速排序。
> 4. 合并结果，最终完成排序。

**快速排序因其高效的平均性能和较小的额外空间需求，成为实际中应用最广泛的排序算法之一。**

## 代码

::: code-group
<<< ../../../src/sorting/quick-sort.ts

<<< ../../../src/sorting/quick-sort.test.ts
:::

## 源码

<SourceGroup/>

## 注意点

1. **时间复杂度**：

   - 最坏情况时间复杂度：$O(n^2)$，当每次选择的基准值导致划分极不平衡（如数组已逆序）。
   - 平均时间复杂度：$O(n log n)$，在多数情况下，快速排序具有较好的性能。
   - 最好情况时间复杂度：$O(n log n)$，基准值总能将数组平分。

2. **空间复杂度**：

   - 快速排序的空间复杂度取决于递归深度，平均为 $O(log n)$，最坏情况为 $O(n)$。

3. **稳定性**：

   - 快速排序是不稳定的排序算法，因为元素的相对顺序可能会因为分区操作发生改变。

4. **优化**：

   - **三数取中法**：选择基准值时使用三数取中法（首、尾、中间元素的中位数）避免极端情况。
   - **原地分区法**：通过索引交换的方式实现原地分区，减少空间开销。

5. **适用范围**：
   - 快速排序适用于需要高效排序的大规模数据集。

## 使用场景

快速排序因其高效的性能适用于多种场景：

1. **大规模数据集**：

   - 快速排序的平均时间复杂度为 $O(n log n)$，非常适合处理大量数据。

2. **对空间复杂度要求较低的场景**：

   - 快速排序的原地分区版本可以显著降低空间使用。

3. **对效率要求高的应用**：
   - 快速排序通常是默认排序算法（如 JavaScript 的 `Array.prototype.sort` 在许多实现中基于快速排序）。

## 总结

快速排序是一种高效且实用的排序算法，适用于各种大规模数据排序需求。尽管在最坏情况下性能不佳，但通过选择合适的基准值或优化分区策略可以有效避免此问题。与其他排序算法相比，快速排序具有较高的灵活性和广泛的应用场景。
